(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{TVGw:function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"f",function(){return u}),n.d(t,"b",function(){return p});var o=n("lSNA"),i=n.n(o),r=n("mczz"),a=n("8iTF"),c=n("zWrI"),l=n("00Pk");n.d(t,"d",function(){return l.a});var s=function(e){var t=e.history,n=e.location,o=Object(r.f)(n,i()({},c.a.COMMENTS_PANEL,null));t.push(o)},d=function(e){var t=e.history,n=e.location,o=Object(r.f)(n,{},[c.a.COMMENTS_PANEL,c.a.PERM_ID]);t.push(o)},m=function(e){return Object(a.j)(Object(r.b)(e,c.a.PERM_ID))},u=function(e,t,n){var o=e.history,l=e.location,s=Object(a.c)(t,n),d=Object(r.f)(l,i()({},c.a.PERM_ID,s));o.push(d)},p=function(e){var t=e.history,n=e.location,o=Object(r.f)(n,i()({},c.a.COMMENTS_PANEL,null),[c.a.PERM_ID]);t.push(o)}},dB5h:function(e,t){e.exports="/vi-assets/static-assets/icon-t-logo-16x16-333333-b4a149d323fc80fdbecfa988cc290882.svg"},e0Jg:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"k",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"i",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"n",function(){return h}),n.d(t,"o",function(){return b}),n.d(t,"j",function(){return v}),n.d(t,"p",function(){return g}),n.d(t,"g",function(){return y}),n.d(t,"e",function(){return O}),n.d(t,"h",function(){return x}),n.d(t,"m",function(){return C}),n.d(t,"d",function(){return w}),n.d(t,"f",function(){return I});n("jm62"),n("ioFf"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V");var o,i=n("lSNA"),r=n.n(i),a=n("a9ya");function c(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r()(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}var l=(o={},r()(o,a.d.ALL,"all"),r()(o,a.d.HIGHLIGHTED,"nyt-picks"),r()(o,a.d.RECOMMENDED,"reader-picks"),r()(o,a.d.REPORTER_REPLIES,"nyt-replies"),r()(o,a.d.SINGLE_COMMENT,"permalink"),o),s={AUTOOPEN:"autoopen",AUTOOPEN_HOME:"autoopen-home",AUTOOPEN_PERMALINK:"autoopen-permalink",AUTOOPEN_EMAIL_LINK:"autoopen-email-link",HEADER:"header",FOOTER:"footer",C_COLUMN:"ccol",FOOTER_COMMENTS:"footer-comments",INLINE_COMMENTS:"inline-comments"},d=function(e){var t={name:"comments",region:"comments"},n=function(e){return l[e]||""}(e);return n&&(t.context=n),{eventData:{trigger:"module"},module:t}},m=function(e){return{comment:{id:e}}},u=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{region:e,element:{name:"open"}}})},p=function(){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"close"}}})},f=function(e,t){var n={name:e===a.d.SINGLE_COMMENT?"back-to-all-comments":t===a.d.SINGLE_COMMENT?"timestamp":"tab"},o=a.e[t];return o&&(n.label=o),c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:n}})},h=function(e,t){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{region:t,name:"submit-new",label:e}}})},b=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"submit-reply",label:e}}})},v=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"user-recommend",label:e}}})},g=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"user-unrecommend",label:e}}})},y=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"user-flagged",label:e}}})},O=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"replies-view-all",label:e}}})},x=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"read-more",label:e}}})},C=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"sort",label:a.b[e]}}})},w=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"profile-edit",label:e}}})},I=function(e){return c({},{event:"moduleInteraction",eventData:{type:"click"}},{module:{element:{name:"faq",label:e}}})}},"f+2V":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return r});var o=function(e,t){13!==e.keyCode&&32!==e.keyCode||t()},i=function(e,t){13===e.keyCode&&t()},r=function(e,t){27===e.keyCode&&t()}},mLxj:function(e,t){e.exports="/vi-assets/static-assets/icon-t-logo-16x16-white-ad841ea17addc275d2a0d56571eefb0c.svg"},vAfL:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"actionClass",function(){return Be}),n.d(o,"secondaryClass",function(){return He}),n.d(o,"defaultClass",function(){return Ve});var i,r,a,c,l=n("VkAN"),s=n.n(l),d=n("pVnL"),m=n.n(d),u=n("lwsE"),p=n.n(u),f=n("W8MJ"),h=n.n(f),b=n("a1gu"),v=n.n(b),g=n("Nsbk"),y=n.n(g),O=n("7W2i"),x=n.n(O),C=(n("17x9"),n("q1tI")),w=n.n(C),I=n("QS0n"),k=n("Dugd"),j=n.n(k),N=n("ZKN5"),E=n("8iTF"),T=n("TVGw"),A=n("gcR/"),R=n.n(A),L=n("lSNA"),S=n.n(L),P=(n("OG14"),n("X6oL")),z=n.n(P),M=n("cr+I"),_=n.n(M),U=n("Vg22"),D=n("wXC7"),F=n.n(D),B=n("aanX"),H=n.n(B),V=n("f+2V"),G=n("UmXO"),Y=n("hKNt"),W=n("a9ya"),K=n("e0Jg"),q=n("RIqP"),X=n.n(q),Q=n("cFmA"),J=n.n(Q),Z=n("f81r"),$=n("uyHG"),ee=n.n($),te=n("2oaX"),ne=(ee()(function(e){return null==e?void 0:e[Math.floor(Math.random()*e.length)]}),ee()(function(e,t,n){var o;return null==e?void 0:null===(o=e.commentIds)||void 0===o?void 0:o.filter(function(e){return Object(te.b)(t,e).attributes.text.length<=n})}),n("jm62"),n("ioFf"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("f3/d"),n("dlEz")),oe=n("QXZS"),ie=(n("Oyvg"),Object(G.css)("display:inline-block;margin-right:10px;overflow:hidden;object-fit:cover;.medium &{border-radius:50%;height:30px;width:30px;}.small &{border-radius:50%;height:26px;width:26px;}span&{background:",F.a.color.gray50,";color:",F.a.color.white,";display:inline-block;font-size:12px;text-align:center;text-transform:uppercase;.medium &{line-height:33px;}.small &{line-height:29px;}}.placeholder &{background:",F.a.color.gray80,";}")),re=new RegExp("http(s?)://graphics8.nytimes.com/images/apps/timespeople/none.png"),ae="medium",ce="small",le=Object(N.a)((a=r=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.size,o=e.placeholder,i=function(e){return e&&re.test(e)?null:e}(this.props.url);return R()("div",{className:Object(G.cx)(n,{placeholder:o}),"aria-hidden":"true"},void 0,i&&R()("img",{className:ie,alt:t,src:i}),!i&&R()("span",{className:ie},void 0,t.substr(0,1)))}}]),t}(C.Component),r.defaultProps={size:ae,title:"",url:null,placeholder:!1},i=a))||i,se=(n("SMB2"),Object(G.css)("display:flex;font-size:",F.a.font.size(15),";margin-bottom:5px;width:100%;")),de=Object(G.css)("flex-grow:2;"),me=Object(G.css)("margin-left:10px;"),ue=Object(G.css)("font-weight:",F.a.font.weight.bold,";"),pe=Object(G.css)("color:",F.a.color.gray35,";font-size:",F.a.font.size(14),";font-weight:",F.a.font.weight.light,";line-height:",F.a.font.size(17),";margin-top:3px;a{color:",F.a.color.gray35,";font-family:",F.a.font.franklinBase,";text-decoration:none;&:hover{text-decoration:underline;}}"),fe=Object(G.css)(".",ue,"{background:",F.a.color.gray80,";height:10px;width:162px;}.",pe,"{background:",F.a.color.gray80,";height:10px;margin-top:4px;width:100px;}"),he={MEDIUM:"medium",SMALL:"small"},be=(c={},S()(c,he.MEDIUM,ae),S()(c,he.SMALL,ce),c);function ve(e){var t=e.title,n=e.subtitle,o=e.avatarUrl,i=e.secondaryContent,r=e.size,a=e.avatarTitle;return e.placeholder?R()("div",{className:Object(G.cx)(se,fe)},void 0,R()(le,{size:be[r],placeholder:!0}),R()("div",{className:de},void 0,R()("div",{className:ue}),R()("div",{className:pe}))):R()("div",{className:se},void 0,R()(le,{title:a||t,url:o,size:be[r]}),R()("div",{className:de},void 0,R()("div",{className:ue},void 0,t),n&&R()("div",{className:pe},void 0,n)),i&&R()("div",{className:me},void 0,i))}ve.displayName="UserHeader",ve.defaultProps={title:"",subtitle:null,avatarUrl:null,secondaryContent:null,size:he.M,avatarTitle:null,placeholder:!1};var ge,ye,Oe,xe=ve,Ce=Object(G.css)("border:1px solid ",F.a.color.gray60,";border-radius:3px;color:",F.a.color.black,";font-family:",F.a.font.franklinBase,";font-size:",F.a.font.size(15),";line-height:",F.a.font.size(18),";padding:10px 15px;transition:0.6s;width:100%;&:focus{border-color:",F.a.color.blue20,";}"),we=Object(G.css)("overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;white-space:pre-wrap;"),Ie=Object(G.css)("color:",F.a.color.red10,";display:inline-block;"),ke=Object(G.css)("padding-top:10px;"),je=Object(G.css)("font-size:",F.a.font.size(13),";line-height:",F.a.font.size(17),";h6{color:#589714;font-weight:",F.a.font.weight.bold,";}"),Ne=Object(G.css)("font-size:",F.a.font.size(14),";line-height:",F.a.font.size(18),";background:",F.a.color.gray90,";margin-top:15px;padding:15px;"),Ee=Object(G.css)(we,";font-size:",F.a.font.size(14),";line-height:",F.a.font.size(20),";"),Te=Object(U.connect)(function(e,t){var n=e.profile.data;return{displayName:n.displayName,location:n.location,avatarUrl:n.picURL,email:n.email,commentNotify:Boolean(n.comment_notify),text:e.commentEntry.submittedComments[t.replyToCommentId]}})((Oe=ye=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.avatarUrl,n=e.commentNotify,o=e.displayName,i=e.location,r=e.text,a=e.isReply,c=n?Z.a.waitingOnApprovalNotify:Z.a.waitingOnApproval;return R()("div",{className:Object(G.cx)(S()({},ke,a))},void 0,R()("div",{className:je},void 0,R()("h6",{},void 0,Z.a.submissionThanks),c),R()("div",{className:Ne},void 0,R()(xe,{size:he.SMALL,title:o,avatarUrl:t,subtitle:"".concat(i," | ").concat(Z.a.pendingApproval)}),R()("div",{className:Ee},void 0,r)))}}]),t}(C.Component),ye.defaultProps={avatarUrl:null,isReply:!1},ge=Oe))||ge,Ae=n("MCI9"),Re=n("PxMw"),Le=n.n(Re),Se=n("2SQs"),Pe=n.n(Se),ze=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=Ae.reduxForm.apply(void 0,t)(e);return function(e){return w.a.createElement(n,e)}}},Me=n("X7zQ"),_e=n("JYoY"),Ue=n("QILm"),De=n.n(Ue),Fe=Object(G.css)("background:none;border:none;color:",F.a.color.linkColor,";font-family:",F.a.font.franklinBase,";font-size:",F.a.font.size(13),";line-height:",F.a.font.size(18),";text-decoration:none;&:hover{text-decoration:underline;cursor:pointer;}"),Be=Object(G.css)("button&,a{",Fe,";font-weight:",F.a.font.weight.mediumBold,";}"),He=Object(G.css)("button&,a{",Fe,";}"),Ve=Object(G.css)("button&,a{",Fe,";color:",F.a.color.gray40,";padding-bottom:4px;}"),Ge={ACTION:"action",SECONDARY:"secondary",DEFAULT:"default"},Ye=function(e){var t=e.children,n=e.onClick,i=e.theme,r=De()(e,["children","onClick","theme"]),a=o["".concat(i,"Class")];return n?w.a.createElement("button",m()({type:"button",tabIndex:0,className:a,onClick:n},r),t):w.a.createElement("span",m()({className:a},r),t)};Ye.displayName="TextButton",Ye.defaultProps={children:null,onClick:null,theme:Ge.DEFAULT};var We=Ye,Ke=Object(G.css)("input{display:inline;}label{color:",F.a.color.gray35,";display:inline;margin-left:4px;vertical-align:middle;}"),qe=function(e){var t=e.input,n=e.label,o=e.className;return R()("div",{className:Object(G.cx)(Ke,o)},void 0,w.a.createElement("input",m()({id:t.name},t,{type:"checkbox"})),R()("label",{htmlFor:t.name},void 0,n)," ")};function Xe(e){return w.a.createElement(Ae.Field,m()({},e,{type:"checkbox",component:qe}))}qe.displayName="CheckboxComponent",qe.defaultProps={className:""},Xe.displayName="Checkbox",Xe.defaultProps={className:""};var Qe=Object(G.css)("input{",Ce,";height:42px;color:",F.a.color.blue20,";}"),Je=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).fieldComponent=function(e){var t=e.placeholder,o=e.input,i=e.type,r=e.disabled,a=e.label;return R()("div",{className:Object(G.cx)(Qe,n.props.className)},void 0,w.a.createElement("input",m()({disabled:r,id:o.name,autoComplete:"off"},o,{type:i,placeholder:t,"aria-label":a})))},n}return x()(t,e),h()(t,[{key:"render",value:function(){return w.a.createElement(Ae.Field,m()({},this.props,{type:"text",component:this.fieldComponent}))}}]),t}(C.Component);Je.displayName="TextInput",Je.defaultProps={placeholder:"",className:"",disabled:!1};var Ze=Object(G.css)("background-color:",F.a.color.gray50,";border-radius:50%;height:","26px",";width:","26px",";max-width:unset;object-fit:cover;"),$e=Object(G.css)("min-width:","26px",";width:","26px",";line-height:0;"),et=Object(G.css)("background:none;border:none;color:",F.a.color.linkColor,";font-family:",F.a.font.franklinBase,";font-size:0.5625rem;font-weight:",F.a.font.weight.medium,";letter-spacing:0.013em;line-height:normal;padding-top:3px;text-align:center;text-decoration:none;text-transform:uppercase;width:100%;&:hover{text-decoration:underline;cursor:pointer;}"),tt=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={blobUrl:null},n.avatarUpload=w.a.createRef(),n.clickHandler=function(){return n.avatarUpload.current.click()},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.input,o=t.title,i=t.currentAvatar,r=this.state.blobUrl,a=!!r||!!i;return R()(w.a.Fragment,{},void 0,R()("div",{alt:o,onClick:this.clickHandler,onKeyPress:this.clickHandler,role:"button",tabIndex:0,className:$e},void 0,a&&R()("img",{src:r||i,alt:o,className:Ze}),!a&&R()("div",{className:Ze}),R()("div",{className:et},void 0,"edit")),w.a.createElement("input",m()({},Pe()(n,["value","onChange"]),{onChange:function(t){var o=new FileReader;o.onload=function(t){return e.setState({blobUrl:t.target.result})},o.readAsDataURL(t.target.files[0]),n.onChange(t)},type:"file",style:{display:"none"},ref:this.avatarUpload,accept:".jpg, .png, .jpeg"})))}}]),t}(C.Component);tt.displayName="fieldComponent",tt.defaultProps={placeholder:""};var nt=function(e){return w.a.createElement(Ae.Field,m()({},e,{type:"text",component:tt}))};nt.displayName="AvatarUpload",tt.defaultProps={placeholder:""};var ot=nt,it=n("kV2j"),rt=n("+4HN"),at=n("WXMI"),ct=function(e){var t=e.children;return R()(rt.a,{url:at.b},void 0,t)};ct.displayName="LoginLink";var lt,st,dt,mt=ct,ut=(n("84bF"),Object(G.css)("font-size:",F.a.font.size(15),";input[disabled],textarea[disabled]{background-color:",F.a.color.gray90,";}")),pt=Object(G.css)("text-align:left;"),ft=Object(G.css)("display:flex;align-items:center;& > *{flex-grow:1;margin:0 10px 10px 0;}.",pt,"{width:100%;&:last-of-type{margin-right:0;}}@media (max-width:",F.a.breakpoint.width.small,"px){flex-direction:column;.",pt,"{margin-right:0;}}"),ht=Object(G.css)(Ce,";font-size:",F.a.font.size(15),";line-height:",F.a.font.size(20),";resize:vertical;box-sizing:border-box;background:",F.a.color.white,";"),bt=Object(G.css)("display:flex;margin-top:10px;"),vt=Object(G.css)("flex-grow:2;"),gt=Object(G.css)("color:",F.a.color.gray35,";flex-grow:1;margin-left:60px;text-align:right;white-space:nowrap;"),yt=Object(G.css)("display:flex;justify-content:space-between;align-items:start;margin:10px 0 5px 0;"),Ot=Object(G.css)("display:flex;justify-content:space-between;flex-shrink:0;button{padding:9px 9px 7px;line-height:13px;white-space:nowrap;&:not(:last-of-type){margin-right:5px;}}"),xt=Object(G.css)(Ie,";overflow:hidden;margin-right:10px;");function Ct(){var e=s()(["\n    fragment CommentForm_article on Article {\n      url\n    }\n  "]);return Ct=function(){return e},e}var wt=1500,It=function(e){return/^[a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(String(e).toLowerCase())},kt=function(e){var t,n=e[Me.a.COMMENT_BODY],o=e[Me.a.DISPLAY_NAME],i=e[Me.a.LOCATION],r=e[Me.a.AVATAR_URL];return(null==o?void 0:o.length)>40?{_error:Z.a.commentFormNameTooLong}:It(o)||It(i)?{_error:Z.a.commentFormNoEmail}:(null==i?void 0:i.length)>40?{_error:Z.a.commentFormEmailTooLong}:(null==r?void 0:null===(t=r[0])||void 0===t?void 0:t.size)>5e6?{_error:Z.a.commentFormAvatarTooBig}:(null==n?void 0:n.length)>wt?{_error:Z.a.commentFormErrorBodyTooLong}:o&&i&&n?{_error:!1}:{_error:!0}},jt=z()()(lt=Object(U.connect)(function(e,t){var n={};if(n.form=t.formName||t.replyToCommentId||"comment-form",n.destroyOnUnmount=!1,n.validate=kt,n.isReplyForm=!Object(te.l)(t.replyToCommentId),e.profile.data){var o,i=e.profile.data,r=Boolean(i.comment_notify),a=i.displayName,c=i.email,l=i.location,s=i.picURL,d=i.userID,m="";n.isReplyForm&&(m=Object(te.a)(e,t.replyToCommentId))&&(m="@".concat(m)),n.initialValues=(o={},S()(o,Me.a.ARICLE_TAXONOMY,e.article.taxonomy),S()(o,Me.a.ARTICLE_URL,Object(it.a)(e)),S()(o,Me.a.COMMENT_BODY,m),S()(o,Me.a.COMMENT_NOTIFY,r),S()(o,Me.a.DISPLAY_NAME,a),S()(o,Me.a.COMMENT_TYPE,n.isReplyForm?"userReply":"comment"),S()(o,Me.a.EMAIL,c),S()(o,Me.a.LOCATION,l),S()(o,Me.a.PARENT_ID,t.replyToCommentId),S()(o,Me.a.USER_ID,d),o),n.profile=S()({displayName:a,location:l,commentNotify:r},_e.a.AVATAR_URL,s)}return e.profile.error&&(n.profileHasErrors=!0),n},function(e){return{closeCommentEntry:function(){return e(Object(Y.b)())},fetchProfile:function(){return e(Object(Y.h)())},createComment:function(t){return e(Object(Y.r)(function(e){var t=e[Me.a.AVATAR_URL];return t?t[0]:null}(t))).then(function(){return e(Object(Y.c)(function(e){return Pe()(e,Me.a.AVATAR_URL)}(t)))}).catch(function(e){return function(e){var t=Z.a.couldNotSave;throw e.message===Z.a.tooManySubmits&&(t=Z.a.tooManySubmits),new Ae.SubmissionError({_error:t})}(e)})}}})(lt=ze()((dt=st=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={charsLeft:wt,editProfile:!1},n.handleCancel=function(e){e.preventDefault(),n.props.closeCommentEntry()},n.handleEditProfile=function(e){n.props.tracking.trackEvent(Object(K.d)(e)),n.setState({editProfile:!0})},n.handleSubmit=function(e){var t=n.props,o=t.isReplyForm,i=t.tracking,r=t.region,a=o?Object(K.o)(e):Object(K.n)(e,r);i.trackEvent(a)},n.updateCharsLeft=function(e,t){n.setState({charsLeft:wt-t.length})},n.getUserHeader=function(e){var t=Z.a.edit,o=he.SMALL;return e?R()(xe,{tabIndex:0,size:o,title:"".concat(e.displayName,", ").concat(e.location),avatarUrl:e[_e.a.AVATAR_URL],subtitle:Z.a.commentFormProfileLabel,secondaryContent:R()(We,{theme:Ge.SECONDARY,onClick:function(){return n.handleEditProfile(t)}},void 0,t)}):R()(xe,{size:o,placeholder:!0})},n}return x()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.props.fetchProfile()}},{key:"render",value:function(){var e=this,t=this.props,n=t.dirty,o=t.error,i=t.invalid,r=t.handleSubmit,a=t.pristine,c=t.submitting,l=t.profile,s=t.shouldShowCancel,d=t.textInputHeight,m=t.isLoggedIn,u=t.actionBarStyle,p=t.profileHasErrors||l&&(!l.displayName||!l.location||this.state.editProfile),f=Z.a.requiredLabel({fieldName:Z.a.nameLabel}),h=Z.a.requiredLabel({fieldName:Z.a.locationLabel}),b=l?l[_e.a.AVATAR_URL]:null,v=this.props.submitButtonLabel||Z.a.submit;return R()("form",{className:ut,onSubmit:r(this.props.createComment)},this.props.form,m&&!p&&this.getUserHeader(l),m&&p&&R()("div",{className:ft},void 0,R()(ot,{name:Me.a.AVATAR_URL,currentAvatar:b,title:"upload avatar",disabled:c}),R()(Je,{name:Me.a.DISPLAY_NAME,className:pt,placeholder:f,disabled:c,label:"display name"}),R()(Je,{name:Me.a.LOCATION,className:pt,placeholder:h,disabled:c,label:"display location"})),m&&R()(Ae.Field,{name:Me.a.COMMENT_BODY,component:"textarea",style:{minHeight:d},onChange:this.updateCharsLeft,className:ht,disabled:c,"aria-multiline":!0,"aria-label":"comment entry"}),!m&&R()(mt,{},void 0,R()("div",{className:ht,"aria-label":"comment entry",style:{minHeight:d}})),R()("div",{className:bt},void 0,R()("div",{className:vt},void 0,R()(Xe,{name:Me.a.COMMENT_NOTIFY,label:Z.a.commentNotifyLabel,normalize:function(e){return!!e},disabled:c})),R()("div",{className:gt},void 0,this.state.charsLeft)),R()("div",{className:Object(G.cx)(yt,u)},void 0,R()("div",{className:xt},void 0,n&&o),R()("div",{className:Ot},void 0,s&&R()(Le.a,{theme:"default",onClick:this.handleCancel},void 0,Z.a.cancel),R()(Le.a,{theme:"action",onClick:function(){return e.handleSubmit(v)},disabled:l&&(i||a||c)},void 0,v))))}}]),t}(C.Component),st.defaultProps={shouldShowCancel:!0,submitButtonLabel:null,textInputHeight:200,isLoggedIn:!0,actionBarStyle:null,region:null,profileHasErrors:!1},lt=dt))||lt)||lt)||lt;jt.fragments={article:j()(Ct())};var Nt,Et=jt;function Tt(){var e=s()(["\n    fragment CommentEntry_article on Article {\n      ...CommentForm_article\n    }\n    ","\n  "]);return Tt=function(){return e},e}var At=Object(G.css)("position:relative;"),Rt=Object(U.connect)()(Nt=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.replyToCommentId,n=e.article;return R()("div",{className:At},void 0,R()(Et,{article:n,replyToCommentId:t}))}}]),t}(C.Component))||Nt;Rt.fragments={article:j()(Tt(),Et.fragments.article)};var Lt=Rt,St=Object(G.css)("font-size:",F.a.font.size(12),";font-weight:",F.a.font.weight.light,";line-height:",F.a.font.size(16),";margin-top:15px;h4{color:",F.a.color.gray35,";text-transform:uppercase;}"),Pt=Object(G.css)("border-left:2px solid ",F.a.color.gray70,";padding-left:15px;"),zt=Object(G.css)("background:",F.a.color.white,";border:1px solid ",F.a.color.gray50,";border-radius:4px;color:",F.a.color.gray27,";display:block;font-size:0.62rem;font-weight:",F.a.font.weight.medium,";letter-spacing:0.025rem;line-height:",F.a.font.size(18),";margin-top:20px;padding:5px 0;text-transform:uppercase;width:100%;&:hover{background-color:",F.a.color.gray90,";border:1px solid ",F.a.color.gray60,";color:",F.a.color.gray25,";}"),Mt=function(e){var t=e.numTotalReplies,n=e.replies,o=e.viewId,i=e.fetchReplies,r=e.isFetchingReplies,a=e.isAcceptingComments,c=e.sourceId,l=e.articleId;if(0===t)return null;var s=n.length<t;return R()("div",{className:St},void 0,R()("h4",{},void 0,t," ",t>1?Z.a.replies:Z.a.reply),R()("div",{className:Pt},void 0,n.map(function(e){return R()(oo,{commentId:e,viewId:o,isAcceptingComments:a,isNested:!0,sourceId:c,articleId:l},e)})),s&&R()("button",{type:"button",className:zt,onClick:i},void 0,r?Z.a.loading:Z.a.viewAllReplies))};Mt.displayName="ReplyList",Mt.defaultProps={fetchReplies:void 0,isFetchingReplies:void 0,isAcceptingComments:void 0};var _t,Ut,Dt,Ft,Bt,Ht,Vt,Gt,Yt,Wt,Kt=Mt,qt=n("OO03"),Xt=n("HUmG"),Qt=n("mFn4"),Jt=n.n(Qt),Zt=(_t=z()(),Ut=Object(U.connect)(function(e,t){return{recommendedCount:Object(te.e)(e,t.commentId),hasUserRecommended:Object(te.f)(e,t.commentId)}},function(e,t){return{recommendComment:function(){return e(Object(Y.n)(t.commentId))},unrecommendComment:function(){return e(Object(Y.q)(t.commentId))}}}),_t(Dt=Object(qt.a)(Dt=Ut(Dt=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){var t=n.props,o=t.tracking;t.hasUserRecommended?(o.trackEvent(Object(K.p)(e)),n.props.unrecommendComment()):(o.trackEvent(Object(K.j)(e)),n.props.recommendComment())},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.hasUserRecommended,o=t.recommendedCount,i=n?Z.a.recommended:Z.a.recommend,r=o>0?"".concat(o," ").concat(i):i;return Object(Xt.e)(this.props.user)?R()(We,{theme:Ge.SECONDARY,onClick:function(){return e.handleClick(r)}},void 0,r):R()(We,{theme:Ge.SECONDARY},void 0,R()(mt,{},void 0,r))}}]),t}(C.Component))||Dt)||Dt)||Dt),$t=(Ft=Object(U.connect)(null,function(e,t){return{openCommentEntry:function(){return e(Object(Y.m)(t.replyToCommentId))}}}),Object(qt.a)(Bt=Ft(Bt=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this;return Object(Xt.e)(this.props.user)?R()(We,{theme:Ge.ACTION,onClick:function(){e.props.openCommentEntry()}},void 0,Z.a.reply):R()(We,{theme:Ge.ACTION},void 0,R()(mt,{},void 0,Z.a.reply))}}]),t}(C.Component))||Bt)||Bt),en=(Ht=z()(),Vt=Object(U.connect)(function(e,t){return{numReplies:Object(te.d)(e,t.commentId),replyToCommentId:Object(te.h)(e,t.commentId),replyToAuthorName:Object(te.g)(e,t.commentId)}}),Object(I.withRouter)(Gt=Ht(Gt=Vt((Wt=Yt=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).selectReplyToComment=function(e){e.preventDefault();var t=n.props.replyToCommentId;Object(T.f)({history:n.props.history,location:n.props.location},t)},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.commentId,n=e.isNested,o=e.numReplies,i=e.replyToAuthorName,r=e.replyToCommentId,a=e.shouldHideReplies,c=e.isAcceptingComments,l=e.handleShowReplies,s=!n&&r&&i&&c;if(s)return R()("span",{},void 0,s&&R()(We,{theme:Ge.ACTION,onClick:this.selectReplyToComment},void 0,Z.a.inReplyTo," ",i));if(a){var d="".concat(o," ").concat(o>1?Z.a.replies:Z.a.reply);return R()(We,{theme:Ge.ACTION,onClick:l},void 0,d)}return c?R()($t,{replyToCommentId:t}):null}}]),t}(C.Component),Yt.defaultProps={replyToAuthorName:void 0,replyToCommentId:void 0,isAcceptingComments:void 0,shouldHideReplies:void 0,handleShowReplies:function(){return null}},Gt=Wt))||Gt)||Gt)||Gt),tn=n("7WMn"),nn=function(e){var t=e.sourceId,n=e.commentId;if(!e.userIsModerator)return null;return R()(We,{onClick:function(){var e=Object(tn.b)()===tn.a.PRD?"prd":"dev",o="https://moderator-dashboard.".concat(e,".nyt.net/articles/article_").concat(t,"/comments/").concat(n);window.open(o)}},void 0,"Moderate")};nn.displayName="InternalUseOnlyModerateButton";var on=nn,rn=(n("Z2Ku"),n("L9s1"),Object(G.css)("margin-top:6px;")),an=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).fieldComponent=function(e){var t=e.input,n=e.options,o=t.name,i=t.onChange,r=t.onBlur,a=t.onFocus,c=t.value,l=n.map(function(e,t){var n=e.label,l=e.value,s=c.includes(l),d="".concat(o,"[").concat(t,"]");return R()(qe,{className:rn,label:n,input:{id:d,name:d,value:l,checked:s,onChange:function(e){var t=X()(c);return e.target.checked?t.push(l):t.splice(t.indexOf(l),1),r(t),i(t)},onFocus:a}},d)});return R()("div",{},void 0,l)},n}return x()(t,e),h()(t,[{key:"render",value:function(){return w.a.createElement(Ae.Field,m()({},this.props,{type:"checkbox",component:this.fieldComponent}))}}]),t}(C.Component);an.displayName="CheckboxGroup";var cn,ln,sn,dn,mn,un,pn,fn=Object(G.css)("font-family:",F.a.font.franklinBase,";font-size:",F.a.font.size(15),";line-height:",F.a.font.size(20),";padding:20px 20px 15px;h4{font-weight:",F.a.font.weight.mediumBold,";margin-bottom:8px;}"),hn=Object(G.css)("margin-top:10px;"),bn=Object(G.css)(Ie,";margin-left:10px;"),vn={FLAGS:"flags"},gn=[{label:Z.a.inflammatory,value:"Inflammatory"},{label:Z.a.offTopic,value:"Off-topic"},{label:Z.a.personalAttack,value:"Personal-attack"},{label:Z.a.vulgar,value:"Vulgar"},{label:Z.a.spam,value:"Spam"}],yn=function(){throw new Ae.SubmissionError({_error:Z.a.anErrorOccurred})},On=z()()(cn=Object(U.connect)(function(){return{}},function(e){return{flagComment:function(t,n){return e(Object(Y.l)(t,n)).then(function(){},yn)}}})(cn=ze({form:"flag-form",validate:function(e){var t=e[vn.FLAGS];return(null==t?void 0:t.length)>0?{}:{_error:!0}}})(cn=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).flagComment=function(e){return n.props.flagComment(n.props.commentId,e[vn.FLAGS])},n.handleSubmit=function(e){n.props.tracking.trackEvent(Object(K.g)(e))},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.error,o=t.handleSubmit,i=t.invalid,r=t.submitting,a=Z.a.submit;return R()("form",{className:fn,onSubmit:o(this.flagComment)},void 0,R()("h4",{},void 0,Z.a.reportInappropriateComment),R()(an,{name:vn.FLAGS,options:gn}),R()("div",{className:hn},void 0,R()(Le.a,{theme:"action",onClick:function(){return e.handleSubmit(a)},disabled:i||r},void 0,a),n&&R()("div",{className:bn},void 0,n)))}}]),t}(C.Component))||cn)||cn)||cn,xn=Object(G.css)("margin:20px 0 15px;font-family:",F.a.font.franklinBase,";font-size:0.75rem;color:",F.a.color.gray40,";line-height:1;text-align:center;width:100%;"),Cn="".concat(Z.a.permalink,": "),wn=Object(U.connect)(function(e,t){return{shortUrl:Object(te.j)(e,t.commentId)}},function(e,t){return{fetchShortUrl:function(){return e(Object(Y.j)(t.commentId))}}})((dn=sn=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).handleOnFocus=function(e){var t=e.target;t.focus(),window.setTimeout(function(){t.setSelectionRange(Cn.length,t.value.length)},0)},n}return x()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.props.fetchShortUrl()}},{key:"render",value:function(){var e=this.props.shortUrl,t="#permid=".concat(this.props.commentId),n=Cn+(e?"".concat(e).concat(t):"Loading...");return R()("input",{className:xn,readOnly:!0,onFocus:this.handleOnFocus,value:n})}}]),t}(C.Component),sn.defaultProps={shortUrl:null},ln=dn))||ln,In=Object(G.css)("a,button{background:none;border:none;color:",F.a.color.linkColor,";font-family:",F.a.font.franklinBase,";font-size:",F.a.font.size(13),";line-height:",F.a.font.size(18),";margin-right:10px;text-align:left;text-decoration:none;vertical-align:top;&:hover{text-decoration:underline;cursor:pointer;}}"),kn=Object(G.css)("margin-right:0;float:right;a,button{color:",F.a.color.gray40,";}"),jn=Object(qt.a)((pn=un=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.commentId,n=e.viewId,o=e.sourceId,i=e.isNested,r=e.shouldHideReplies,a=e.isAcceptingComments,c=e.handleShowReplies,l=e.userIsModerator,s=Object(Xt.e)(this.props.user);return R()("div",{},void 0,R()("div",{className:In},void 0,R()(on,{userIsModerator:l,commentId:t,sourceId:o}),R()(en,{handleShowReplies:c,shouldHideReplies:r,isAcceptingComments:a,viewId:n,commentId:t,isNested:i}),R()(Zt,{commentId:t}),R()(Jt.a,{width:400,ariaLabel:"Share permalink",arrowPosition:"top",buttonContent:Z.a.share,modalContent:R()(wn,{commentId:t})}),R()("div",{className:kn},void 0,s&&R()(Jt.a,{width:400,ariaLabel:"Flag content menu",arrowPosition:"top",className:kn,buttonContent:Z.a.flag,modalContent:R()(On,{commentId:t})}),!s&&R()(mt,{},void 0,Z.a.flag))))}}]),t}(C.Component),un.defaultProps={viewId:null},mn=pn))||mn;jn.displayName="Toolbar";var Nn,En,Tn,An,Rn,Ln=jn,Sn=n("dB5h"),Pn=n.n(Sn),zn=n("mLxj"),Mn=n.n(zn),_n=Object(G.css)("border-bottom:1px solid ",F.a.color.gray60,";font-family:",F.a.font.franklinBase,";font-weight:",F.a.font.weight.medium,";margin-top:20px;padding-bottom:20px;&:last-of-type{border:none;padding-bottom:40px;}"),Un=Object(G.css)(we,";margin-left:40px;"),Dn=Object(G.css)("& > *{&::before{color:",F.a.color.gray60,";content:'|';display:inline-block;margin:0 8px;}&:first-child::before{content:'';margin:0;}}"),Fn=Object(G.css)("white-space:nowrap;"),Bn=Object(G.css)("display:inline-block;float:right;font-size:",F.a.font.size(12),";font-weight:",F.a.font.weight.bold,";line-height:",F.a.font.size(18),";white-space:nowrap;",F.a.breakpoint.medium,"{font-size:0.737rem;line-height:1.05rem;}&::before{border-radius:50%;height:18px;width:18px;background-color:#fcc772;background-image:url('",Pn.a,"');background-position:center;background-repeat:no-repeat;background-size:10px 10px;content:'';display:inline-block;margin-right:4px;margin-bottom:-1px;vertical-align:sub;}"),Hn=Object(G.css)("{border-radius:50%;height:18px;width:18px;background-color:",F.a.color.black,";background-image:url('",Mn.a,"');background-position:center;background-repeat:no-repeat;background-size:10px 10px;display:inline-block;margin-left:4px;vertical-align:text-bottom;white-space:nowrap;"),Vn=Object(G.css)("font-size:",F.a.font.size(14),";line-height:",F.a.font.size(20),";overflow-x:hidden;a{color:",F.a.color.linkColor,";font-family:",F.a.font.franklinBase,";text-decoration:none;&:hover{text-decoration:underline;}",we,";}"),Gn=Object(G.css)("font-size:",F.a.font.size(12),";line-height:",F.a.font.size(15),";color:",F.a.color.red10,";margin-top:5px;"),Yn=Object(G.css)("margin-top:15px;"),Wn=Object(G.css)("border:none;padding-bottom:0;.",Un,"{margin-left:36px;}"),Kn=Object(G.css)("margin-top:10px;");var qn,Xn,Qn,Jn,Zn,$n,eo,to,no,oo=(Nn=z()(function(e){return Object(K.c)(e.commentId)}),En=Object(U.connect)(function(e,t){var n,o=Object(te.b)(e,t.commentId);if(!o)return{error:!0};var i=o.attributes.authorPanel,r=Object(te.h)(e,t.commentId),a={profile:{name:i.name,location:i.location,avatarUrl:i.avatar,title:i.title},isoTimestamp:o.attributes.sourceApprovedAt,isHighlighted:Boolean(o.attributes.isHighlighted),isReporterReply:Boolean(o.attributes.isReporterReply),replyToCommentId:r,hasSubmittedReply:t.commentId in e.commentEntry.submittedComments,text:o.attributes.text,isFlagged:Object(te.k)(e,t.commentId),commentEntryReplyToCommentId:e.commentEntry.replyToCommentId,numTotalReplies:Object(te.d)(e,t.commentId),userIsModerator:null===(n=e.profile.data)||void 0===n?void 0:n.isModerator};return t.isNested||(a.isFetchingReplies=o.relationships.replies.isFetchingReplies,a.replies=Object(te.c)(e,t.commentId)||[]),a}),Object(N.a)(Tn=Object(I.withRouter)(Tn=Nn(Tn=En((Rn=An=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={shouldHideReplies:(n.props.viewId===W.d.HIGHLIGHTED||n.props.viewId===W.d.RECOMMENDED)&&0!==n.props.numTotalReplies},n.fetchReplies=function(){var e=n.props,t=e.tracking,o=e.articleId,i=e.commentId,r=e.replies,a=e.dispatch;n.props.viewId===W.d.REPORTER_REPLIES?a(Object(Y.g)(o,i)):a(Object(Y.i)(o,i,r.length)),t.trackEvent(Object(K.e)(Z.a.viewAllReplies))},n.handleShowReplies=function(){n.props.numTotalReplies>0&&0===n.props.replies.length&&n.fetchReplies(),n.setState(function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){S()(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},n.state,{shouldHideReplies:!1}))},n.selectSingleComment=function(e){e.preventDefault();var t=n.props,o=t.commentId,i=t.replyToCommentId,r=t.tracking,a=t.viewId;r.trackEvent(Object(K.l)(a,W.d.SINGLE_COMMENT)),i?Object(T.f)({history:n.props.history,location:n.props.location},i,o):Object(T.f)({history:n.props.history,location:n.props.location},o)},n.getTimeStamp=function(){var e=n.props,t=e.isoTimestamp,o=e.viewId,i=R()(ne.a,{iso:t,formatter:"elapsed"});return o===W.d.SINGLE_COMMENT?i:R()("a",{href:"",onClick:n.selectSingleComment,className:Fn},void 0,i)},n}return x()(t,e),h()(t,[{key:"render",value:function(){if(this.props.error)return null;this.props.isReporterReply&&null!=this.props.profile.title&&(this.props.profile.location=this.props.profile.title);var e=this.props,t=e.profile,n=e.commentId,o=e.isFlagged,i=e.isHighlighted,r=e.isNested,a=e.isReporterReply,c=e.viewId,l=e.totalComments,s=e.commentIndex,d=e.numTotalReplies,m=e.isAcceptingComments,u=e.replies,p=e.isFetchingReplies,f=e.hasSubmittedReply,h=e.userIsModerator,b=e.sourceId,v=e.articleId,g=this.state.shouldHideReplies,y=Object(oe.f)({date:new Date(this.props.isoTimestamp),labelText:!0}),O="".concat(t.name," commented ").concat(y),x=!r&&!!d&&!g,C=this.getTimeStamp();return R()("div",{className:Object(G.cx)(_n,S()({},Wn,r)),role:"article",tabIndex:0,"aria-setsize":l,"aria-posinset":s,"aria-labelledby":"comment-description-".concat(s),"aria-describedby":"comment-content-".concat(s)},void 0,R()("a",{className:Object(G.cx)(F.a.a11y.visuallyHidden),href:"",id:"comment-description-".concat(s),"aria-label":O,tabIndex:-1},void 0,O),R()(xe,{avatarTitle:t.name,title:R()("span",{},void 0,t.name,a&&R()("div",{className:Hn})),avatarUrl:t.avatarUrl,subtitle:R()("span",{className:Dn},void 0,t.location&&R()("span",{dangerouslySetInnerHTML:{__html:t.location}}),C),secondaryContent:i&&R()("div",{className:Bn},void 0,Z.a.timesPick),size:r?he.SMALL:he.MEDIUM}),R()("div",{className:Un},void 0,R()("p",{id:"comment-content-".concat(s),className:Vn,dangerouslySetInnerHTML:{__html:this.props.text}}),o&&R()("div",{className:Gn},void 0,Z.a.reported),!o&&R()("div",{className:Yn},void 0,R()(Ln,{viewId:c,commentId:n,sourceId:b,isNested:r,handleShowReplies:this.handleShowReplies,shouldHideReplies:g,isAcceptingComments:m,userIsModerator:h}),this.props.commentEntryReplyToCommentId===n&&R()("div",{className:Kn},void 0,R()(Lt,{replyToCommentId:n})),f&&R()(Te,{isReply:!0,replyToCommentId:n}),x&&R()(Kt,{viewId:c,replies:u,numTotalReplies:d,fetchReplies:this.fetchReplies,isFetchingReplies:p,isAcceptingComments:m,sourceId:b,articleId:v}))))}}]),t}(C.Component),An.defaultProps={replyToCommentId:null,commentEntryReplyToCommentId:null,error:!1,isNested:!1,isReporterReply:!1,totalComments:0,commentIndex:0,replies:[],isFetchingReplies:!1,userIsModerator:!1,numTotalReplies:void 0,dispatch:function(){return null},hasSubmittedReply:void 0},Tn=Rn))||Tn)||Tn)||Tn)||Tn),io=(n("dRSK"),n("/J+c")),ro=n.n(io),ao=Object(G.css)("color:",F.a.color.blue20,";font-size:13px;margin-bottom:10px;position:relative;text-align:right;"),co=Object(G.css)("cursor:pointer;display:inline-block;"),lo=Object(G.css)("background:none;display:inline-block;width:9px;margin-left:6px;margin-bottom:2px;vertical-align:baseline;@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){height:10px;}"),so=Object(G.css)("background-color:",F.a.color.white,";cursor:pointer;position:absolute;right:0;width:105px;ul{border-style:solid;box-shadow:2px 4px 6px ",F.a.color.gray60,";padding-top:4px;text-align:left;}li{color:",F.a.color.black,";padding:10px;&:hover{background-color:",F.a.color.gray90,";}}"),mo=Object(G.css)("font-weight:",F.a.font.weight.mediumBold,";"),uo=z()()(qn=Object(U.connect)(function(e,t){var n=e.commentLists[t.listId];return{sortOptions:(n.sortTypes||[]).map(function(e){return{sortType:e,label:W.b[e]}}),selectedSortType:n.selectedSortType||null}},function(e){return{sortCommentList:function(t,n,o){return e(Object(Y.p)(t,n,o))}}})((Qn=Xn=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).handleClickOutside=function(e){null!=n.node&&n.node.contains(e.target)||n.setState({menuActive:!1})},n.state={menuActive:!1},n.sortCommentList=function(e,t){t.preventDefault(),e!==n.props.selectedSortType&&(n.props.sortCommentList(n.props.articleId,n.props.listId,e),n.props.tracking.trackEvent(Object(K.m)(e))),n.toggleMenu(),n.sortButton&&n.sortButton.focus()},n.toggleMenu=function(){var e=!n.state.menuActive;n.setState({menuActive:e})},n}return x()(t,e),h()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.sortOptions,o=t.selectedSortType;if(0===n.length)return null;var i=n.find(function(e){return e.sortType===o});return w.a.createElement("div",{className:ao,ref:function(t){e.node=t}},w.a.createElement("div",{role:"button",tabIndex:0,onClick:this.toggleMenu,onKeyDown:function(t){return Object(V.a)(t,e.toggleMenu)},className:co,ref:function(t){e.sortButton=t}},R()("span",{},void 0,"Sort by: ",i.label),R()("button",{type:"button",className:lo,tabIndex:-1,"aria-expanded":this.state.menuActive,"aria-haspopup":"true"},void 0,R()(ro.a,{fill:F.a.color.blue20}))),this.state.menuActive&&R()("div",{className:so},void 0,R()("ul",{role:"tablist"},void 0,n.map(function(t){var n=t.sortType,i=t.label;return R()("li",{onClick:function(t){return e.sortCommentList(n,t)},onKeyDown:function(t){Object(V.a)(t,function(){e.sortCommentList(n,t)})},role:"tab",className:Object(G.cx)(S()({},mo,n===o)),"aria-selected":n===o,tabIndex:0},n,i)}))))}}]),t}(C.Component),Xn.defaultProps={selectedSortType:null},qn=Qn))||qn)||qn,po=Object(G.css)("font-size:",F.a.font.size(13),";line-height:",F.a.font.size(20),";margin-top:20px;"),fo=Object(G.css)("background:",F.a.color.white,";border:1px solid ",F.a.color.gray50,";border-radius:4px;color:",F.a.color.gray27,";display:block;font-size:0.62rem;font-weight:",F.a.font.weight.medium,";letter-spacing:0.025rem;line-height:",F.a.font.size(18),";margin-top:20px;padding:5px 0;text-transform:uppercase;width:100%;&:hover{background-color:",F.a.color.gray90,";border:1px solid ",F.a.color.gray60,";color:",F.a.color.gray25,";}"),ho=function(e){var t=e.children,n=e.offset,o=e.onEnter,i=e.onExit;if(e.disable||n>t.length)return t;var r=X()(t),a=R()(J.a,{onEnter:o,onExit:i},"waypointTwo");return r.splice(t.length-n,0,a),r},bo=z()()(Jn=Object(U.connect)(function(e,t){var n,o,i=function(e,t){var n=function(e,t){return e.views[t]||null}(e,t);return n?n.listId:null}(e,t.viewId),r=function(e,t){return e.commentLists[t]||null}(e,i),a=null,c=!1,l=null;return r&&(a=r.commentIds||null,c=!!r.nextUrl,l=r.selectedSortType||null),{listId:i,commentIds:a,hasNext:c,isFetching:null===(n=e.commentLists[i])||void 0===n?void 0:n.isFetching,isFetchingNext:null===(o=e.commentLists[i])||void 0===o?void 0:o.isFetchingNext,selectedSortType:l}},function(e){return{fetchCommentList:function(t,n){return e(Object(Y.e)(t,n))},fetchCommentListNext:function(t,n){return e(Object(Y.f)(t,n))}}})(($n=Zn=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).fetchCommentList=function(){n.props.fetchCommentList(n.props.articleId,n.props.listId)},n.fetchCommentListNext=function(e){n.props.tracking.trackEvent(Object(K.h)(n.props.viewId,e)),n.props.fetchCommentListNext(n.props.articleId,n.props.listId)},n.getMessage=function(){var e=n.props,t=e.commentIds;return e.isFetching||null===t?Z.a.loading:0===t.length?Z.a.noComments:null},n}return x()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.props.shouldShowPanel&&this.fetchCommentList()}},{key:"componentDidUpdate",value:function(e){var t=this.props.shouldShowPanel&&!e.shouldShowPanel;(this.props.listId!==e.listId||t)&&this.fetchCommentList()}},{key:"render",value:function(){var e=this,t=this.getMessage();if(t)return R()("div",{className:po},void 0,t);var n=this.props,o=n.articleId,i=n.sourceId,r=n.listId,a=n.viewId,c=n.commentIds,l=n.hasNext,s=n.isFetchingNext,d=n.selectedSortType,m=n.isAcceptingComments,u=Z.a.readMore,p=Z.a.loading;return R()("div",{role:"feed",tabIndex:-1,"aria-label":Z.a.commentList},void 0,d&&R()(uo,{articleId:o,listId:r,viewId:a}),c&&R()(ho,{offset:15,onEnter:function(){return e.props.fetchCommentListNext(o,r)},disable:!l},void 0,c.map(function(e,t){return R()(oo,{tabIndex:0,totalComments:c.length,commentIndex:t+1,articleId:o,viewId:a,isAcceptingComments:m,commentId:e,sourceId:i},e+a)})),l&&R()("button",{type:"button",className:fo,onClick:function(){return e.fetchCommentListNext(u)},disabled:s},void 0,s?p:u))}}]),t}(C.Component),Zn.defaultProps={commentIds:null,selectedSortType:null,sourceId:void 0,isFetching:void 0,isFetchingNext:void 0,isAcceptingComments:void 0},Jn=$n))||Jn)||Jn,vo=Object(G.css)("margin-top:10px;"),go=Object(G.css)("color:",F.a.color.gray20,";font-size:",F.a.font.size(14),";font-weight:",F.a.font.weight.medium,";line-height:",F.a.font.size(18),";margin-bottom:12px;margin-top:15px;a{color:",F.a.color.blue20,";font-family:",F.a.font.franklinBase,";text-decoration:none;&:hover{text-decoration:underline;}}",F.a.breakpoint.medium,"{line-height:",F.a.font.size(20),";}"),yo=Object(G.css)(Ce,";box-sizing:border-box;color:",F.a.color.gray30,";display:block;font-size:",F.a.font.size(14),";height:42px;line-height:",F.a.font.size(24),";padding-top:11px;"),Oo=Object(G.css)("cursor:text;");function xo(){var e=s()(["\n    fragment CommentPrompt_article on Article {\n      ...CommentEntry_article\n    }\n    ","\n  "]);return xo=function(){return e},e}var Co=(eo=z()(),to=Object(U.connect)(function(e){return{isFetching:e.article.isFetching,commentQuestion:e.panel.commentQuestion||"",commentEntryReplyToCommentId:e.commentEntry.replyToCommentId}},function(e){return{openCommentEntry:function(){return e(Object(Y.m)(Object(te.i)()))}}}),eo(no=Object(qt.a)(no=to(no=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).handleFaqClick=function(e){n.props.tracking.trackEvent(Object(K.f)(e))},n}return x()(t,e),h()(t,[{key:"isUserLoggedIn",value:function(){return Object(Xt.e)(this.props.user)}},{key:"render",value:function(){var e=this;if(this.props.isFetching)return null;var t=this.props,n=t.commentQuestion;if(!t.isAcceptingComments)return R()("div",{className:Object(G.cx)(vo,go),dangerouslySetInnerHTML:{__html:Z.a.commentsClosed}});var o=Object(te.i)(),i=this.isUserLoggedIn();if(this.props.commentEntryReplyToCommentId===o&&i)return R()("div",{className:vo},void 0,R()(Lt,{article:this.props.article,replyToCommentId:o}));var r=Z.a.commentPromptPlaceholder,a=n===r?Z.a.welcome:n,c=Z.a.moderationDisclaimer;return R()("div",{className:vo},void 0,i&&R()("span",{className:Object(G.cx)(yo,Oo),onClick:this.props.openCommentEntry,onKeyPress:this.props.openCommentEntry,role:"textbox",tabIndex:"0"},void 0,r),!i&&R()(mt,{},void 0,R()("span",{className:yo},void 0,r)),R()("div",{className:go},void 0,a," ",R()("a",{href:"https://www.nytimes.com/content/help/site/usercontent/usercontent.html",target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleFaqClick(c)}},void 0,c)))}}]),t}(C.Component))||no)||no)||no);Co.fragments={article:j()(xo(),Lt.fragments.article)};var wo,Io,ko,jo,No=Co,Eo=Object(G.css)("background:none;border:none;color:",F.a.color.blue20,";font-size:",F.a.font.size(13),";font-weight:",F.a.font.weight.book,";line-height:",F.a.font.size(20),";"),To=Object(G.css)("max-width:300px;text-align:center;"),Ao=Object(G.css)("font-family:",F.a.font.franklinBase,";font-weight:",F.a.font.weight.bold,";font-size:17px;display:flex;justify-content:center;align-items:center;.",To,"{padding:100px 0;}@supports (height:100vh){height:70vh;.",To,"{padding:0;}}");var Ro=(wo=Object(U.connect)(function(e,t){var n=Object(te.b)(e,t.commentId);return{isCommentLoaded:Boolean(n)}},function(e){return{fetchComments:function(t,n,o){return e(Object(Y.g)(t,n,o))}}}),Object(I.withRouter)(Io=wo((jo=ko=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).state={isFetchingComment:!0},n}return x()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.articleId,o=t.commentId,i=t.replyCommentId,r=i?[i]:[],a=function(){return e.setState(function(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){S()(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({},e.state,{isFetchingComment:!1}))};this.props.fetchComments(n,o,r).then(a).catch(a)}},{key:"render",value:function(){var e=this.props,t=e.articleId,n=e.sourceId,o=e.commentId,i=e.isCommentLoaded,r=e.isAcceptingComments;return R()("div",{},void 0,R()("button",{type:"button",className:Eo,onClick:this.props.closeView},void 0,Z.a.backToAllComments),i&&R()(oo,{articleId:t,sourceId:n,commentId:o,viewId:W.d.SINGLE_COMMENT,isAcceptingComments:r}),!this.state.isFetchingComment&&!i&&R()("div",{className:Ao},void 0,R()("span",{className:To},void 0,Z.a.commentNotFound)))}}]),t}(C.Component),ko.defaultProps={sourceId:void 0,isAcceptingComments:void 0,isCommentLoaded:!1,replyCommentId:""},Io=jo))||Io)||Io),Lo=Object(G.css)("font-family:",F.a.font.franklin,";font-weight:",F.a.font.weight.medium,";font-size:",F.a.font.size(17),";letter-spacing:0.2px;line-height:1.2rem;display:flex;justify-content:center;align-items:center;height:100%;width:100%;"),So=Object(G.css)("max-width:300px;p{padding:1em 0;}"),Po=Object(G.css)("color:",F.a.color.blue20,";"),zo=R()("div",{className:Lo},void 0,R()("div",{className:So},void 0,R()("p",{},void 0,"Due to technical difficulties, comments are unavailable. We’re working to fix the issue as soon as possible."),R()("p",{},void 0,"If you have a critical piece of feedback for us, you can always reach the newsroom via the"," ",R()(rt.a,{className:Po,alt:"reader center",url:"https://www.nytimes.com/2017/08/08/reader-center/we-want-to-hear-from-you.html"},void 0,"Reader Center"),"."),R()("p",{},void 0,"Thank you for reading, and sorry for the trouble!"))),Mo=function(){return zo};Mo.displayName="UnderMaintenance";var _o,Uo,Do,Fo,Bo=Mo,Ho=Object(G.css)("position:relative;"),Vo=Object(G.css)("background:-webkit-linear-gradient(left,rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%);height:42px;position:absolute;pointer-events:none;right:0;top:0;width:30px;z-index:2;"),Go=Object(G.css)("background:",F.a.color.white,";border-bottom:1px solid ",F.a.color.gray60,";box-shadow:0 6px 6px -6px ",F.a.color.gray60,";display:block;height:42px;-webkit-overflow-scrolling:touch;overflow-x:auto;overflow-y:hidden;&::-webkit-scrollbar{display:none;}@media (max-width:",F.a.breakpoint.width.small,"px){padding:0 20px;}ul{color:",F.a.color.gray35,";display:inline-block;font-size:",F.a.font.size(14),";line-height:",F.a.font.size(21),";overflow:hidden;white-space:nowrap;",F.a.breakpoint.medium,"{font-size:",F.a.font.size(14),";line-height:",F.a.font.size(21),";}",F.a.breakpoint.extraLarge,"{font-size:",F.a.font.size(14),";line-height:",F.a.font.size(21),";}li{display:inline-block;cursor:pointer;padding-top:15px;padding-bottom:4px;margin-right:20px;min-width:30px;text-align:center;font-weight:",F.a.font.weight.mediumBold,";a{color:",F.a.color.gray35,";}&.selected{border-bottom:2px solid ",F.a.color.black,";color:",F.a.color.black,";font-weight:",F.a.font.weight.mediumBold,";a{color:",F.a.color.black,";}}}}"),Yo=z()()(_o=Object(U.connect)(function(e){return{tabs:e.panel.tabs}},function(e){return{selectView:function(t){return e(Object(Y.o)(t))}}})((Do=Uo=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).handleSelectTab=function(e,t){t.preventDefault();var o=n.props,i=o.selectedViewId,r=o.tracking;e!==i&&(r.trackEvent(Object(K.l)(i,e)),n.props.selectView(e))},n}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,o=t.selectedViewId,i=t.firstTabRef;return 0===n.length?null:R()("div",{className:Ho},void 0,R()("div",{className:Vo}),R()("div",{className:Go},void 0,R()("ul",{role:"tablist"},void 0,n.map(function(t,n){var r=t.viewId,a=t.label;return R()("li",{className:Object(G.cx)({selected:o===r}),role:"tab","aria-selected":o===r},r,w.a.createElement("a",{href:"",ref:0===n?i:null,tabIndex:0,onClick:function(t){return e.handleSelectTab(r,t)}},a))}))))}}]),t}(C.Component),Uo.defaultProps={tabs:[],selectedViewId:null},_o=Do))||_o)||_o,Wo=n("rI8Z"),Ko=Object(G.css)("color:",F.a.color.black,";display:inline-block;font-weight:",F.a.font.weight.bold,";font-size:",F.a.font.size(30),";line-height:",F.a.font.size(34),";padding-left:2px;padding-right:2px;span{color:",F.a.color.gray20,";font-weight:",F.a.font.weight.medium,";font-size:",F.a.font.size(24),";line-height:",F.a.font.size(29),";}a:focus{outline:0;}"),qo=Object(G.css)("color:",F.a.color.blue30,";display:none;font-family:",F.a.font.serifMedium,";line-height:1.18rem;margin-top:5px;text-decoration:none;&:hover{text-decoration:underline;}"),Xo=Object(G.css)("font-family:",F.a.font.franklinBase,";font-size:",F.a.font.size(14),";line-height:",F.a.font.size(20),";font-weight:",F.a.font.weight.bold,";text-transform:uppercase;letter-spacing:0.05em;top:50px;right:125px;");function Qo(){var e=s()(["\n    fragment Header_article on Article {\n      headline {\n        default\n      }\n    }\n  "]);return Qo=function(){return e},e}var Jo=Object(U.connect)(function(e){return{commentCount:Object(it.b)(e)}})(Fo=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.closePanel,n=e.skipToCommentList,o=e.commentCount,i=e.article;return R()("header",{},void 0,R()("h2",{className:Ko},void 0,R()("a",{href:"#commentsContainer",tabIndex:-1,"aria-label":Wo.b.comments.commentPanel},void 0,"Comments ",o>0&&R()("span",{},void 0,o))),R()("a",{className:qo,href:"",onClick:t},void 0,i.headline.default),R()("a",{href:"",className:Object(G.cx)(F.a.a11y.visuallyHidden,F.a.a11y.focusable,Xo),onClick:n,tabIndex:0},void 0,"Skip to Comments"))}}]),t}(C.Component))||Fo;Jo.fragments={article:j()(Qo())};var Zo,$o,ei,ti,ni,oi=Jo,ii=Object(G.css)("background-color:",F.a.color.white,";box-shadow:3px 0 12px 3px rgba(0,0,0,0.25);font-family:",F.a.font.franklinBase,";height:100%;overflow:hidden;position:fixed;right:0;top:0;width:100%;z-index:",F.a.zIndex.commentsPanel,";visibility:hidden;transform:translateX(110%);transition:transform 300ms ease,visibility 300ms;",F.a.breakpoint.small,"{width:530px;}"),ri=Object(G.css)("visibility:visible;transform:none;transition:transform 300ms ease,visibility 300ms;"),ai=Object(G.css)("background-color:",F.a.color.white,";display:block;height:15px;right:16px;position:absolute;top:16px;width:15px;z-index:3;@media (max-width:",F.a.breakpoint.width.small,"px){right:15px;}"),ci=Object(G.css)("height:100%;overflow-y:scroll;width:100%;-webkit-overflow-scrolling:touch;"),li=Object(G.css)("padding:40px 0;position:relative;box-sizing:border-box;height:100%;"),si=Object(G.css)("padding:0 40px;z-index:0;@media (max-width:",F.a.breakpoint.width.small,"px){padding:0 20px;}"),di=Object(G.css)("margin-bottom:10px;position:sticky;top:0;z-index:2;",F.a.breakpoint.small,"{padding:0 40px;}");function mi(){var e=s()(["\n    fragment CommentsPanel_article on Article {\n      ...CommentPrompt_article\n      ...Header_article\n      sourceId\n      url\n    }\n    ","\n    ","\n  "]);return mi=function(){return e},e}var ui=R()(Bo,{}),pi=(Zo=Object(U.connect)(function(e,t){var n,o={viewId:e.panel.viewId},i=Object(T.c)(t.location),r=i.commentId,a=i.replyCommentId;return r&&(o.backToViewId=o.viewId,o.viewId=W.d.SINGLE_COMMENT,o.singleComment={commentId:r,replyCommentId:a}),(null===(n=e.article)||void 0===n?void 0:n.data)&&(o.articleId=e.article.data.id),o.isAcceptingComments=Object(E.f)(e.article.commentStatus),o.hasSubmittedParentComment=!1,o.replyToCommentId=Object(te.i)(),o.isUnderMaintenance=e.panel.isUnderMaintenance||!1,e.commentEntry&&(o.hasSubmittedParentComment=Object(te.i)()in e.commentEntry.submittedComments),o},function(e){return{fetchProfile:function(t){return e(Object(Y.h)(t))},fetchArticle:function(t,n){return e(Object(Y.d)(t,n))}}}),$o=z()(function(e){return Object(K.k)(e.viewId)}),Object(I.withRouter)(ei=Zo(ei=$o((ni=ti=function(e){function t(){var e,n;p()(this,t);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=v()(this,(e=y()(t)).call.apply(e,[this].concat(i)))).commentsPanelRef=w.a.createRef(),n.firstTabRef=w.a.createRef(),n.handleOpenPanel=function(){return Object(T.e)({history:n.props.history,location:n.props.location})},n.handleClosePanel=function(){return Object(T.a)({history:n.props.history,location:n.props.location})},n.handleClosePanel=function(){n.props.tracking.trackEvent(Object(K.b)()),n.focusOnSpeechBubble(),Object(T.a)({history:n.props.history,location:n.props.location})},n.handleCloseSingleComment=function(){var e=n.props,t=e.backToViewId;e.tracking.trackEvent(Object(K.l)(W.d.SINGLE_COMMENT,t)),Object(T.b)(n.props)},n.focusOnSpeechBubble=function(){if(document&&window){var e=window.NYT_SPEECHBUBBLE||"comments-speech-bubble-top",t=document.getElementById(e);t&&(t.focus(),delete window.NYT_SPEECHBUBBLE)}},n.focusOnCommentsPanel=function(){n.commentsPanelRef.current&&setTimeout(function(){return n.commentsPanelRef.current.focus()},450)},n.skipToCommentList=function(e){e.preventDefault(),n.firstTabRef.current&&setTimeout(function(){return n.firstTabRef.current.focus()},500)},n.escHandler=function(e){return Object(V.c)(e,n.handleClosePanel)},n}return x()(t,e),h()(t,[{key:"showPanelWithTracking",value:function(){var e,t=this.props,n=t.viewId,o=t.articleId,i=t.tracking,r=t.article.url,a=t.shouldShowPanel,c=t.location.search,l=_.a.parse(c);this.props.fetchProfile(r),this.props.fetchArticle(o,r),this.focusOnCommentsPanel(),"HPCommentsRefer"===l.modref?e=K.a.AUTOOPEN_HOME:"comment-approval"===l.emc?e=K.a.AUTOOPEN_EMAIL_LINK:n===W.d.SINGLE_COMMENT?e=K.a.AUTOOPEN_PERMALINK:a&&(e=K.a.AUTOOPEN),e&&setTimeout(function(){return i.trackEvent(Object(K.i)(e))},1e3)}},{key:"componentDidMount",value:function(){this.props.shouldShowPanel&&this.showPanelWithTracking(),document.addEventListener("keydown",this.escHandler,!1),window.NYT_openCommentsPanel=this.handleOpenPanel}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escHandler,!1)}},{key:"componentWillUpdate",value:function(e){!this.props.shouldShowPanel&&e.shouldShowPanel&&this.showPanelWithTracking()}},{key:"render",value:function(){var e=this.props,t=e.singleComment,n=e.article,o=e.articleId,i=e.viewId,r=e.article.sourceId,a=e.shouldShowPanel,c=e.isAcceptingComments,l=e.replyToCommentId,s=e.hasSubmittedParentComment,d=e.isUnderMaintenance,m=!d&&t&&t.commentId,u=!d&&!m;return R()("div",{className:Object(G.cx)(ii,S()({},ri,a)),role:"region","aria-label":"comments panel",tabIndex:-1},void 0,w.a.createElement("button",{ref:this.commentsPanelRef,type:"button",className:ai,onClick:this.handleClosePanel,"aria-label":"close comments panel"},R()(H.a,{tabIndex:0,stroke:F.a.color.gray30})),R()("div",{className:ci},void 0,R()("div",{className:li},void 0,d&&ui,m&&o&&R()("div",{className:si},void 0,R()(Ro,{tabIndex:0,sourceId:r,articleId:o,commentId:t.commentId,replyCommentId:t.replyCommentId,closeView:this.handleCloseSingleComment,isAcceptingComments:c})),u&&R()("div",{},void 0,R()("div",{className:si},void 0,R()(oi,{article:n,closePanel:this.handleClosePanel,skipToCommentList:this.skipToCommentList}),!s&&R()(No,{article:n,isAcceptingComments:c}),s&&R()(Te,{replyToCommentId:l})),w.a.createElement("div",{ref:this.commentsListRef,className:di},R()(Yo,{selectedViewId:i,firstTabRef:this.firstTabRef})),R()("div",{className:si},void 0,o&&i&&R()(bo,{shouldShowPanel:a,isAcceptingComments:c,viewId:i,articleId:o,sourceId:r}))))))}}]),t}(C.Component),ti.defaultProps={hasSubmittedParentComment:void 0,isAcceptingComments:void 0,isUnderMaintenance:void 0,singleComment:void 0,articleId:void 0,viewId:void 0,replyToCommentId:void 0,backToViewId:void 0,location:{},history:{}},ei=ni))||ei)||ei)||ei);pi.fragments={article:j()(mi(),No.fragments.article,oi.fragments.article)};var fi,hi=pi;function bi(){var e=s()(["\n    fragment CommentsPanelContainer_article on Article {\n      commentStatus\n      ...CommentsPanel_article\n    }\n    ","\n  "]);return bi=function(){return e},e}var vi=Object(I.withRouter)(fi=Object(N.a)(fi=function(e){function t(){return p()(this,t),v()(this,y()(t).apply(this,arguments))}return x()(t,e),h()(t,[{key:"render",value:function(){return Object(E.h)(this.props.article.commentStatus)?w.a.createElement(hi,m()({shouldShowPanel:Object(T.d)({location:this.props.location})},this.props)):null}}]),t}(C.Component))||fi)||fi;vi.fragments={article:j()(bi(),hi.fragments.article)};var gi=vi;n.d(t,"default",function(){return gi})}}]);
//# sourceMappingURL=comments-4fa86959176e57c220b7.js.map