document.addEventListener("DOMContentLoaded",function(e){function t(e){var t="https://app.sgwidget.com/v2/api/newsletter-signup",r="",d="",c="";r=n(document.getElementById("sg_email")?document.getElementById("sg_email").value:document.getElementById("email").value),document.getElementById("sg_signup_first_name")&&(d=n(document.getElementById("sg_signup_first_name").value)),document.getElementById("sg_signup_last_name")&&(c=n(document.getElementById("sg_signup_last_name").value));var m=new FormData;m.append("email",r),m.append("first_name",d),m.append("last_name",c),m.append("token",i.dataset.token),e.length>0&&m.append("custom_fields",JSON.stringify(e));var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");l.open("POST",t,!0),l.onload=function(){var e=JSON.parse(l.responseText);200==l.status?e.message.indexOf("error")!==-1?(a.disabled=!1,u(e.message,"error")):s(e,r,d,c):500==l.status&&u(e.message,"error")},l.send(m)}function s(e,t,s,n){e.success_redirect_url&&""!=e.success_redirect_url?(e.success_redirect_url=e.success_redirect_url+"?email="+t,0!=s&&(e.success_redirect_url=e.success_redirect_url+"&first_name="+s),0!=n&&(e.success_redirect_url=e.success_redirect_url+"&last_name="+n),window.location=e.success_redirect_url):u(e.message,"success")}function u(e,t){document.getElementById("sg-response").className="",document.getElementById("sg-response").className+="sg-response "+t,document.getElementById("sg-response").innerHTML=e,document.getElementById("sg-response").style.display="block"}function n(e){var t=/(<([^>]+)>)/gi;return e.replace(t,"")}function r(e){var t=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return t.test(e)}if(null!==document.querySelector("#sendgrid-subscription-widget")){var a=document.getElementById("sg-submit-btn"),d=document.getElementById("sendgrid-subscription-widget"),i=document.getElementById("sg-widget");a.addEventListener("click",function(e){if(e.preventDefault(),document.getElementById("sg_signup_first_name")){if(first_name_field=document.getElementById("sg_signup_first_name"),first_name=n(document.getElementById("sg_signup_first_name").value),!first_name&&"undefined"!=typeof d.dataset.nameerror)return name_error=d.dataset.nameerror,first_name_field.className+=" required",void u(name_error,"error");first_name_field.classList.remove("required")}if(document.getElementById("sg_signup_last_name")){if(last_name_field=document.getElementById("sg_signup_last_name"),last_name_val=n(document.getElementById("sg_signup_last_name").value),!last_name_val&&"undefined"!=typeof d.dataset.nameerror)return name_error=d.dataset.nameerror,last_name_field.className+=" required",void u(name_error,"error");last_name_field.classList.remove("required")}var s="";if(document.getElementById("sg_email")?(email_field=document.getElementById("sg_email"),s=n(document.getElementById("sg_email").value)):(email_field=document.getElementById("email"),s=n(document.getElementById("email").value)),!s||!r(s)){var i="Please enter a valid email address";return"undefined"!=typeof d.dataset.emailerror&&(i=d.dataset.emailerror),email_field.className+=" required",void u(i,"error")}email_field.classList.remove("required");var c=[];if(null!==document.querySelector(".sg_custom")){custom_fields_input=document.getElementsByClassName("sg_custom");for(var m=0;m<custom_fields_input.length;m++){c[m]={};var l=document.getElementsByName(custom_fields_input[m].name)[0];if(l.hasAttribute("required")&&("checkbox"==l.type&&1==!l.checked||""==l.value||"sg_placeholder"==l.value))return l.className+=" required",a.disabled=!1,"undefined"!=typeof d.dataset.customfieldserror&&(customfieldserror=d.dataset.customfieldserror),void u(customfieldserror,"error");"checkbox"==l.type&&1==l.checked&&(custom_fields_input[m].value="yes"),l.classList.remove("required"),c[m].key=custom_fields_input[m].name,c[m].value=n(custom_fields_input[m].value)}}if(document.getElementById("sg_consent_checkbox")){if(sg_consent_checkbox=document.getElementById("sg_consent_checkbox"),1==!sg_consent_checkbox.checked){var o="Please tick the box to accept our conditions";return"undefined"!=typeof d.dataset.checkboxerror&&(o=d.dataset.checkboxerror),sg_consent_checkbox.className+=" required",void u(o,"error")}sg_consent_checkbox.classList.remove("required")}a.disabled=!0,t(c)},!1)}});