define(["jquery","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/components/base"],function(t,i,e,a){i=i.init("leadsTracker"),t.widget("cnet.leadsTracker",t.fly.base,{options:{appendViewguid:!0,fireTrackingPing:!0,numNodes:3,trackingData:{},dwLinktag:null},viewguid:null,_create:function(){this._setup(),this.viewguid=a.guid,this.options.appendViewguid&&this.viewguid&&this.$element.attr("href",this.$element.attr("href").replace("___VIEW_GUID___",this.viewguid)),this.options.fireTrackingPing&&this._setupEvents()},_setupEvents:function(){var n=this,r={pdguid:"productId",assetguid:"articleId",assettitle:"articleTitle",ttag:"qp.ttag",topicguid:"_topicPrimaryId",promoHed:"productName"};this.$element.on("click",function(s){try{var c=n.options.trackingData?n.options.trackingData:n.options,g={_topicPrimaryId:c.topic?c.topic:"",articleType:a.tracking.data.articleType?a.tracking.data.articleType:"deal",articleId:c.articleId?c.articleId:c.assetguid,_campaign:c.ttag?"ttag:"+c.ttag:null,_leadcpc:c.leadcpc,dwLinkTag:c.dwLinkTag||e.getDwTag(t(s.target),n.options.numNodes)},d=this.href.split("?"),o=d.length>1?d[1].split("&"):{};t.each(o,function(t,i){var e="string"==typeof i?i.split("="):i,a=r[e[0]]||e[0];g[a]=e[1]});var p=t.extend(g,c);e.trackLead(p)}catch(t){i.log("Unable to parse tracking url",t)}})}})});