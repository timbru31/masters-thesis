% Based on https://fiw.hs-wismar.de/fileadmin/hs-wismar/_FIW/Vorlagen_und_Richtlinien/thesis-vorlage-2018.zip
%-----------------------------------------------------------------------------
% config.tex
%-----------------------------------------------------------------------------

%-----------------------------------------------------------------------------
% Font size, layout, paper, type and page numbering the of the document
%-----------------------------------------------------------------------------
\documentclass[
	listof=totoc,
	chapteratlists=entry,
	listof=chaptergapline,
	fontsize=12pt,
	oneside,
	a4paper,
	parskip=half,
	bibliography=totoc,
	numbers=noenddot
]{scrreprt}

\newcommand{\romannumbering}{
	\pagenumbering{Roman}
	\setcounter{page}{1}
}

\newcommand{\arabicnumbering}{
	\newcounter{frontmatter}
	\setcounter{frontmatter}{\value{page}}
	\pagenumbering{arabic}
	\setcounter{page}{1}
}

\newcommand{\romannumberingtwo}{
	\pagenumbering{Roman}
	\setcounter{page}{\value{frontmatter}}
}

\newenvironment{mainmatter}{\arabicnumbering}{\newpage}
\newenvironment{frontmatter}{\romannumbering}{\newpage}
\newenvironment{backmatter}{\romannumberingtwo}{}

\newcommand*\OK{\ding{51}}
\newcommand*\NOOK{\ding{53}}
\newcommand*\rot{\rotatebox{90}}
\newcommand*\wa{Web Authentication \gls{api}}

\counterwithout*{footnote}{chapter}

%-----------------------------------------------------------------------------
% Packages
%-----------------------------------------------------------------------------
\usepackage{ifxetex}

\ifxetex
	\usepackage{fontspec}
\else
	\usepackage[T1]{fontenc}
	\usepackage[utf8]{inputenc}
	\usepackage{lmodern}
\fi

\usepackage[american]{babel}
\usepackage{graphicx}
\usepackage{wrapfig}

\usepackage{silence}
\WarningFilter{scrreprt}{Usage of package `fancyhdr'}
\WarningFilter{hyperref}{XeTeX driver only supports unicode.}
\WarningFilter{transparent}{Loading aborted, because pdfTeX is not running in PDF mode}

\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage{xcolor}
\usepackage{lmodern}
\usepackage{amsmath,amssymb}
\usepackage{booktabs}
\usepackage{shortvrb}
\usepackage{makeidx}
\usepackage{rotating}
\usepackage{array}
\usepackage{titling}
\usepackage{multicol}
\usepackage{tabularx}
\usepackage{pifont}
\usepackage{multirow}
\usepackage{dirtree}
\usepackage{epigraph}
\usepackage{svg}
\usepackage{relsize}
\usepackage{enumitem}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepackage{bchart}
\usepackage{minted}
\usepackage[bf]{caption}
\usepackage{csquotes}
\usepackage{morewrites}
\usepackage{tcolorbox}
\usepackage{savesym}
\savesymbol{checkmark}
\usepackage{dingbat}
\usepackage{scrhack}

\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


%-----------------------------------------------------------------------------
% Constants
%-----------------------------------------------------------------------------
\newcommand{\documentType}{Master's Thesis}
\newcommand{\birthday}{03/31/1995}
\newcommand{\birthplace}{Hamburg, Germany}
\newcommand{\firstTutor}{Prof. Dr.-Ing. habil. Andreas Ahrens}
\newcommand{\secondTutor}{Prof. Dr. rer. nat. Nils Gruschka}
\newcommand{\keywords}[1]{\textbf{\textit{Keywords---}} #1}


%-----------------------------------------------------------------------------
% Margins
%-----------------------------------------------------------------------------
\usepackage[
	left=3cm,
	right=3cm,
	top=1.5cm,
	bottom=1.5cm,
	includeheadfoot,
	bindingoffset=0cm
]{geometry}


%-----------------------------------------------------------------------------
% Article data
%-----------------------------------------------------------------------------
\author{Tim Brust}
\title{Security Evaluation of Multi-Factor Authentication in Comparison with the Web Authentication API}
\date{\today{}}


%-----------------------------------------------------------------------------
% PDF Metadata and hyperlinks
%-----------------------------------------------------------------------------
\usepackage[
	pdfauthor={\theauthor},
	pdftitle={\thetitle},
	pdfcreator={XeTeX 3.14159265-2.6-0.999991 (TeX Live 2019)},
	pdfproducer={LaTeX with hyperref},
	pdfsubject={\documentType},
	pdfkeywords={security, web authentication api, webauth, webauthn, fido, mfa, 2fa, multi-factor authentication, two-factor authentication, second-factor authentication, totp, otp, hmac, hotp, fido2, u2f, universal 2nd factor, wings, wismar, cryptography, it-security, forensics},
	plainpages=false,
	hypertexnames=false,
	pdfpagelabels
]{hyperref}

\addto\extrasamerican{%
	\renewcommand{\chapterautorefname}{Chapter}%
}

\usepackage{bookmark}

%-----------------------------------------------------------------------------
% Fonts
%-----------------------------------------------------------------------------
\setkomafont{sectioning}{\rmfamily\bfseries}
\setkomafont{caption}{\small}
\setkomafont{captionlabel}{\sffamily\bfseries\small}
\setkomafont{chapterentry}{\small\bfseries}
\setkomafont{chapter}{\large\bfseries}
\setkomafont{section}{\normalsize}
\setkomafont{subsection}{\normalsize}


%-----------------------------------------------------------------------------
% Colors for PDF documents
%-----------------------------------------------------------------------------
\definecolor{LinkColor}{rgb}{0,0,0.5}

\hypersetup{
	colorlinks=true,
	breaklinks=true,
	linkcolor=black,
	citecolor=black,
	filecolor=LinkColor,
	menucolor=LinkColor,
	urlcolor=LinkColor,
	linktoc=all
}

%-----------------------------------------------------------------------------
% Bibliography style
%-----------------------------------------------------------------------------
\usepackage[backend=biber,style=alphabetic]{biblatex}

\DefineBibliographyStrings{english}{%
	urlseen = {last accessed on},
}

\DeclareBibliographyCategory{badbreaks}
\addtocategory{badbreaks}{bka-cybercrime}
\addtocategory{badbreaks}{chrome-android-webauthn}
\addtocategory{badbreaks}{firefox-android-webauthn}
\addtocategory{badbreaks}{yougov}
\addtocategory{badbreaks}{yougov2}

\AtEveryBibitem{%
	\ifcategory{badbreaks}
	{\defcounter{biburllcpenalty}{9000}\biburlsetup}
	{}}

%-----------------------------------------------------------------------------
% Bibliography
%-----------------------------------------------------------------------------
\addbibresource{sources/papers.bib}
\addbibresource{sources/thesis.bib}
\addbibresource{sources/books.bib}
\addbibresource{sources/standards.bib}
\addbibresource{sources/internet.bib}
\addbibresource{sources/statistics.bib}

%-----------------------------------------------------------------------------
% Index
%-----------------------------------------------------------------------------
\makeindex


%-----------------------------------------------------------------------------
% Glossary and abbreviations
%-----------------------------------------------------------------------------
\usepackage[nonumberlist,toc,acronym]{glossaries-extra}
\usepackage{glossary-mcols}
\setglossarystyle{listgroup}
\setabbreviationstyle[acronym]{long-short}
\renewcommand*{\glsnamefont}[1]{\textbf{#1}}
\renewcommand{\glsxtrpostdescacronym}{%
 \ifglshasfield{see}{\glscurrententrylabel}%
 {%
	\glsfieldfetch{\glscurrententrylabel}{see}{\thisxr}%
	, \expandafter\glsseeformat\thisxr{}%
 }%
 {}%
}

\MFUhyphentrue

\makeglossaries
\input{content/abbreviations}
\glssetcategoryattribute{acronym}{glossdesc}{title}


%-----------------------------------------------------------------------------
% Listings
%-----------------------------------------------------------------------------
\def\exampleautorefname{Listing}

\addtotoclist{loe}
\newcounter{example}[chapter]
\renewcommand{\theexample}{\thechapter.\arabic{example}}
\newcommand{\listofloename}{List of Examples}
\newcommand\listofexamples{\listoftoc{loe}}
\setuptoc{loe}{chapteratlist,totoc}
\makeatletter
\newcommand\l@example{\l@figure}
\makeatother

\newenvironment{example}[2]{%
  \setlength\parfillskip{0pt plus 1fil}%
  \begin{tcolorbox}[
	phantom={\global\refstepcounter{example}},
	before title={%
		\addxcontentsline{loe}{example}[\theexample]{\ignorespaces #1}},
	title=Listing\ \theexample:\ \ignorespaces #1,%
	label=#2
	]%
}{\end{tcolorbox}}


%-----------------------------------------------------------------------------
% Header and footer
%-----------------------------------------------------------------------------
\pagestyle{fancy}
\fancyhf{}
\fancypagestyle{plain}{}
\fancyhead[R]{\nouppercase{\leftmark}}
\renewcommand{\headrulewidth}{0.5pt}
\fancyfoot[R]{\thepage}

\fancypagestyle{noheader}{
	\fancyhf{}
	\renewcommand{\headrulewidth}{0.0pt}
	\fancyfoot[R]{\thepage}
}


%-----------------------------------------------------------------------------
